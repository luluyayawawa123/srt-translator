# SRTå­—å¹•ç¿»è¯‘å·¥å…·

åŸºäºAIå¤§è¯­è¨€æ¨¡å‹çš„SRTå­—å¹•ç¿»è¯‘å·¥å…·ï¼Œæ”¯æŒ**æ–­ç‚¹ç»­æ¥**ã€**å¤šçº¿ç¨‹å¹¶å‘**ã€**æ‰¹é‡å¤„ç†**ç­‰ç‰¹æ€§ã€‚æä¾›ç°ä»£åŒ–GUIç•Œé¢ï¼ˆä»…Windowsï¼‰å’Œè·¨å¹³å°å‘½ä»¤è¡Œå·¥å…·ã€‚

![è½¯ä»¶ç•Œé¢æˆªå›¾](main.jpg)

## ğŸš€ Pythonç¯å¢ƒä½¿ç”¨

### å®‰è£…ä¾èµ–
```bash
pip install customtkinter requests colorama
```

### GUIç•Œé¢ï¼ˆWindowsç³»ç»Ÿï¼‰
```bash
# åŒå‡»è¿è¡Œ
run_gui.bat

# æˆ–å‘½ä»¤è¡Œå¯åŠ¨
python srt_translator_gui.py
```

GUIé»˜è®¤ä½¿ç”¨**è‡ªå®šä¹‰APIæ¨¡å¼**ï¼Œé¢„è®¾ä¸ºDeepSeekæœåŠ¡åœ°å€ã€‚åªéœ€å¡«å…¥APIå¯†é’¥å³å¯ä½¿ç”¨ã€‚æ”¯æŒæ‰€æœ‰OpenAIå…¼å®¹æ¨¡å¼çš„APIæœåŠ¡ã€‚

### å‘½ä»¤è¡Œä½¿ç”¨ï¼ˆè·¨å¹³å°ï¼‰

#### åŸºæœ¬ç¿»è¯‘å‘½ä»¤
```bash
python srt_translator.py input.srt output_cn.srt --batch-size 30 --context-size 3 --threads 10
```

#### å®Œæ•´å‚æ•°è¯´æ˜
```bash
python srt_translator.py <è¾“å…¥æ–‡ä»¶> <è¾“å‡ºæ–‡ä»¶> [é€‰é¡¹]
```

**å¿…éœ€å‚æ•°ï¼š**
- `è¾“å…¥æ–‡ä»¶`: æºSRTå­—å¹•æ–‡ä»¶è·¯å¾„
- `è¾“å‡ºæ–‡ä»¶`: ç¿»è¯‘åçš„SRTæ–‡ä»¶ä¿å­˜è·¯å¾„

**é‡è¦é€‰é¡¹ï¼š**
- `--api-key`: APIå¯†é’¥ï¼ˆå¿…éœ€ï¼Œé™¤éä»£ç ä¸­è®¾ç½®äº†é»˜è®¤å€¼ï¼‰
- `--batch-size`: æ¯æ¬¡ç¿»è¯‘çš„å­—å¹•æ¡æ•°ï¼Œå»ºè®®30ï¼ˆå¹³è¡¡é€Ÿåº¦å’Œè´¨é‡ï¼‰
- `--context-size`: ä¸Šä¸‹æ–‡å¤§å°ï¼Œå»ºè®®3ï¼ˆæä¾›å‰åæ–‡æå‡ç¿»è¯‘è¿è´¯æ€§ï¼‰
- `--threads`: å¹¶å‘çº¿ç¨‹æ•°ï¼Œå»ºè®®10ï¼ˆæ ¹æ®APIé™åˆ¶è°ƒæ•´ï¼‰

**APIé€‰æ‹©ï¼š**
- `--api deepseek`: ä½¿ç”¨DeepSeek API
- `--api grok`: ä½¿ç”¨Grok API  
- `--api custom`: ä½¿ç”¨è‡ªå®šä¹‰OpenAIå…¼å®¹APIï¼ˆæ¨èï¼‰
- `--api-endpoint`: è‡ªå®šä¹‰APIåœ°å€ï¼ˆä¸--api customé…åˆä½¿ç”¨ï¼‰
- `--model`: æŒ‡å®šæ¨¡å‹åç§°ï¼ˆå¦‚deepseek-chatã€gpt-4ç­‰ï¼‰

**èŒƒå›´æ§åˆ¶ï¼š**
- `--start`: èµ·å§‹å­—å¹•ç¼–å·ï¼ˆåªç¿»è¯‘æŒ‡å®šèŒƒå›´ï¼‰
- `--end`: ç»“æŸå­—å¹•ç¼–å·ï¼ˆä¸--starté…åˆä½¿ç”¨ï¼‰
- `--no-resume`: ç¦ç”¨æ–­ç‚¹ç»­æ¥ï¼Œé‡æ–°å¼€å§‹ç¿»è¯‘

**å…¶ä»–é€‰é¡¹ï¼š**
- `--terminology-file`: è‡ªå®šä¹‰æœ¯è¯­åº“æ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤terminology.jsonï¼‰

#### ä½¿ç”¨ç¤ºä¾‹

**1. ä½¿ç”¨DeepSeekç¿»è¯‘å®Œæ•´æ–‡ä»¶ï¼š**
```bash
python srt_translator.py movie.srt movie_cn.srt \
  --api deepseek \
  --api-key sk-ä½ çš„å¯†é’¥ \
  --batch-size 20 \
  --threads 5
```

**2. ä½¿ç”¨è‡ªå®šä¹‰APIï¼ˆæ¨èï¼‰ï¼š**
```bash
python srt_translator.py input.srt output.srt \
  --api custom \
  --api-endpoint https://api.deepseek.com/v1/chat/completions \
  --api-key sk-ä½ çš„å¯†é’¥ \
  --model deepseek-chat \
  --batch-size 30 \
  --context-size 3 \
  --threads 10
```

**3. ç¿»è¯‘æŒ‡å®šèŒƒå›´ï¼ˆæµ‹è¯•ç”¨ï¼‰ï¼š**
```bash
python srt_translator.py test.srt test_cn.srt \
  --start 1 --end 50 \
  --api-key sk-ä½ çš„å¯†é’¥
```

**4. é«˜è´¨é‡ç¿»è¯‘ï¼ˆé€Ÿåº¦è¾ƒæ…¢ï¼‰ï¼š**
```bash
python srt_translator.py input.srt output.srt \
  --batch-size 5 \
  --context-size 5 \
  --threads 1 \
  --api-key sk-ä½ çš„å¯†é’¥
```

**5. é«˜é€Ÿç¿»è¯‘ï¼ˆè´¨é‡ç•¥é™ï¼‰ï¼š**
```bash
python srt_translator.py input.srt output.srt \
  --batch-size 50 \
  --context-size 2 \
  --threads 15 \
  --api-key sk-ä½ çš„å¯†é’¥
```

#### å­—å¹•æ ¡éªŒå·¥å…·

ç¿»è¯‘å®Œæˆåï¼Œä½¿ç”¨æ ¡éªŒå·¥å…·éªŒè¯ç»“æœï¼š

```bash
# åŸºæœ¬æ ¡éªŒ
python srt_checker.py --source original.srt --translated translated.srt

# ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
python srt_checker.py \
  --source original.srt \
  --translated translated.srt \
  --report validation_report.txt
```

**æ ¡éªŒå†…å®¹åŒ…æ‹¬ï¼š**
- âœ… å­—å¹•æ¡ç›®æ•°é‡ä¸€è‡´æ€§
- âœ… æ—¶é—´ç æ ¼å¼å’ŒåŒ¹é…åº¦  
- âœ… å­—å¹•ç¼–å·è¿ç»­æ€§
- âœ… æ–‡ä»¶æ ¼å¼å®Œæ•´æ€§
- âœ… éšæœºæŠ½æ ·å†…å®¹å±•ç¤º

## ğŸ“¦ æ‰“åŒ…ä¸ºWindowsç»¿è‰²è½¯ä»¶

```bash
# 1. å®‰è£…æ‰“åŒ…å·¥å…·
pip install pyinstaller

# 2. æ£€æŸ¥ç¯å¢ƒ
python check_build_env.py

# 3. æ‰§è¡Œæ‰“åŒ…
python build_exe.py
```

æ‰“åŒ…ååœ¨ `SRTç¿»è¯‘å·¥å…·/` ç›®å½•ä¸‹ç”Ÿæˆå¯ç›´æ¥è¿è¡Œçš„exeæ–‡ä»¶ï¼Œæ— éœ€Pythonç¯å¢ƒã€‚

## ğŸ› ï¸ å¼€å‘è€…ä¿¡æ¯

### é¡¹ç›®ç»“æ„
```
â”œâ”€â”€ srt_translator.py          # æ ¸å¿ƒç¿»è¯‘å¼•æ“
â”œâ”€â”€ srt_translator_gui.py      # Windows GUIç•Œé¢
â”œâ”€â”€ srt_checker.py             # å­—å¹•æ ¡éªŒå·¥å…·
â”œâ”€â”€ build_exe.py               # æ‰“åŒ…è„šæœ¬
â”œâ”€â”€ check_build_env.py         # ç¯å¢ƒæ£€æŸ¥
â”œâ”€â”€ run_gui.bat                # GUIå¯åŠ¨è„šæœ¬
â”œâ”€â”€ requirements.txt           # ä¾èµ–åˆ—è¡¨
â””â”€â”€ terminology.json           # æœ¯è¯­åº“æ–‡ä»¶
```

### æ ¸å¿ƒç‰¹æ€§
- **æ–­ç‚¹ç»­æ¥**: ç¿»è¯‘ä¸­æ–­åè‡ªåŠ¨ä»æ–­ç‚¹ç»§ç»­
- **å¤šçº¿ç¨‹**: æ”¯æŒå¹¶å‘ç¿»è¯‘ï¼Œæ˜¾è‘—æå‡é€Ÿåº¦
- **æœ¯è¯­åº“**: ä¿æŒä¸“ä¸šæœ¯è¯­ç¿»è¯‘ä¸€è‡´æ€§ï¼ˆ`terminology.json`ï¼‰
- **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**: æä¾›å‰åæ–‡æå‡ç¿»è¯‘è´¨é‡
- **æ ¼å¼ä¿æŠ¤**: å®Œæ•´ä¿ç•™SRTæ—¶é—´ç å’Œæ ¼å¼
- **OpenAIå…¼å®¹**: æ”¯æŒæ‰€æœ‰OpenAI Chat Completions APIæ ¼å¼çš„æœåŠ¡

## â“ å¸¸è§é—®é¢˜

**Q: ç¿»è¯‘é€Ÿåº¦æ…¢ï¼Ÿ**
A: å¢åŠ `--threads`å’Œ`--batch-size`å‚æ•°ï¼Œæ³¨æ„APIè°ƒç”¨é™åˆ¶ã€‚

**Q: ç¿»è¯‘è´¨é‡ä¸å¥½ï¼Ÿ**
A: å‡å°`--batch-size`ï¼Œå¢åŠ `--context-size`ï¼Œä½¿ç”¨æœ¯è¯­åº“ã€‚

**Q: æ–­ç‚¹ç»­æ¥å¤±è´¥ï¼Ÿ**
A: ç¡®ä¿ä½¿ç”¨ç›¸åŒçš„è¾“å…¥è¾“å‡ºè·¯å¾„ï¼Œæ£€æŸ¥è¿›åº¦æ–‡ä»¶å®Œæ•´æ€§ã€‚

**Q: GUIå¯åŠ¨å¤±è´¥ï¼Ÿ**
A: æ£€æŸ¥æ˜¯å¦Windowsç³»ç»Ÿï¼Œç¡®è®¤å®‰è£…äº†æ‰€æœ‰ä¾èµ–åŒ…ã€‚

**Q: APIè°ƒç”¨å¤±è´¥ï¼Ÿ**
A: éªŒè¯APIå¯†é’¥æœ‰æ•ˆæ€§ï¼Œæ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒAPIæœåŠ¡çŠ¶æ€ã€‚

**Q: æƒ³ç”¨å…¶ä»–AIæœåŠ¡ï¼Ÿ**
A: å¤§éƒ¨åˆ†AIæœåŠ¡éƒ½å…¼å®¹OpenAI APIæ ¼å¼ï¼Œä½¿ç”¨è‡ªå®šä¹‰APIæ¨¡å¼å³å¯ã€‚

**Q: å¦‚ä½•è®¾ç½®APIå¯†é’¥ï¼Ÿ**
A: å¯ä»¥é€šè¿‡`--api-key`å‚æ•°ä¼ é€’ï¼Œæˆ–åœ¨`srt_translator.py`æ–‡ä»¶ä¸­è®¾ç½®é»˜è®¤å€¼ã€‚

---

ğŸ’¡ **æç¤º**: é¦–æ¬¡ä½¿ç”¨å»ºè®®å…ˆç”¨å°èŒƒå›´æµ‹è¯•ï¼š`--start 1 --end 50`
